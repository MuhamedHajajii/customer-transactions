import './polyfills.server.mjs';
import{b as P,d as N,e as O,f as W,g as j,h as H,i as X,j as Y}from"./chunk-332EXLAV.mjs";import"./chunk-BAQ2B3OY.mjs";import{q as V,r as D}from"./chunk-6X6YPKMM.mjs";import{$a as g,Ab as E,Bb as B,Da as c,Db as k,Ea as A,Nb as h,Ob as M,Pb as S,Ta as w,Va as I,Z as F,aa as C,ab as v,bb as y,cb as b,db as n,eb as a,fb as x,ga as d,ha as p,jb as f,mb as _,nb as m,vb as s,wb as u,xb as T,zb as L}from"./chunk-DVOI4AZC.mjs";import"./chunk-VVCT4QZE.mjs";var U=(()=>{let o=class o{transform(e,t){return e.filter(l=>l.amount.toString().includes(t.toString()))}};o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=C({name:"transactionAmount",type:o,pure:!0,standalone:!0});let r=o;return r})();var $=(()=>{let o=class o{transform(e,t){return isNaN(+t)?e.filter(l=>l.name.toLowerCase().includes(t.toLocaleLowerCase())):e.filter(l=>l.id.toString().toLowerCase().includes(t.toLocaleLowerCase()))}};o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=C({name:"transactionsnameandid",type:o,pure:!0,standalone:!0});let r=o;return r})();function q(r,o){if(r&1&&(n(0,"tr")(1,"td",21),s(2),a(),n(3,"td",21),s(4),h(5,"currency"),a(),n(6,"td",21),s(7),h(8,"date"),a()()),r&2){let i=m().$implicit;c(2),u(i.id),c(2),T(" ",M(5,3,i.amount)," "),c(3),T(" ",S(8,5,i.date,"MM-dd-yyyy")," ")}}function G(r,o){if(r&1&&w(0,q,9,8,"tr"),r&2){let i=o.$implicit,e=m().$implicit;g(0,i.customer_id==e.id?0:-1)}}function J(r,o){if(r&1){let i=f();n(0,"tr")(1,"td",17),s(2),a(),n(3,"td",17),s(4),a(),n(5,"td",17)(6,"button",18),_("click",function(){let t=d(i).$implicit,l=m(2);return p(l.HandleCustomerData(t))})("click",function(){d(i);let t=m(2);return p(t.toggleLightBox())}),x(7,"i",19),s(8," Statics "),a()(),n(9,"td")(10,"table",20)(11,"thead")(12,"tr")(13,"th"),s(14,"Id"),a(),n(15,"th"),s(16,"Amount"),a(),n(17,"th"),s(18,"Date"),a()()(),n(19,"tbody"),y(20,G,1,1,null,null,v),h(22,"transactionAmount"),a()()()()}if(r&2){let i=o.$implicit,e=m(2);c(2),u(i.id),c(2),u(i.name),c(16),b(S(22,2,e.AllTransactions,e.SearchFeildAmount))}}function K(r,o){if(r&1){let i=f();n(0,"section")(1,"div",1)(2,"p",2),s(3," All Customers Using "),n(4,"a",3),s(5,"Bootstrap"),a()(),n(6,"div",4)(7,"div",5)(8,"div",6)(9,"p",7)(10,"span",8),x(11,"i",9),s(12," total customers:"),a(),n(13,"span"),s(14),a()()()(),n(15,"div",5)(16,"div",6)(17,"p",7)(18,"span",8),x(19,"i",10),s(20," total transactions:"),a(),n(21,"span"),s(22),a()()()()(),n(23,"div",4)(24,"div",11)(25,"input",12),B("ngModelChange",function(t){d(i);let l=m();return E(l.SearchFeildNameAndId,t)||(l.SearchFeildNameAndId=t),p(t)}),a()(),n(26,"div",11)(27,"input",13),B("ngModelChange",function(t){d(i);let l=m();return E(l.SearchFeildAmount,t)||(l.SearchFeildAmount=t),p(t)}),a()()(),n(28,"div",14)(29,"table",15)(30,"thead",16)(31,"tr")(32,"th"),s(33,"Id"),a(),n(34,"th"),s(35,"Name"),a(),n(36,"th"),s(37,"Transactions"),a(),n(38,"th"),s(39,"Statics"),a()()(),n(40,"tbody"),y(41,J,23,5,"tr",null,v),h(43,"transactionsnameandid"),a()()()()()}if(r&2){let i=m();c(14),u(i.AllCustomers.length),c(8),u(i.AllTransactions.length),c(3),L("ngModel",i.SearchFeildNameAndId),c(2),L("ngModel",i.SearchFeildAmount),c(14),b(S(43,4,i.AllCustomers,i.SearchFeildNameAndId))}}function Q(r,o){if(r&1){let i=f();n(0,"div",22),_("click",function(){d(i);let t=m();return p(t.toggleLightBox())}),n(1,"div",23),_("click",function(t){d(i);let l=m();return p(l.StopProp(t))}),n(2,"button",24),_("click",function(){d(i);let t=m();return p(t.toggleLightBox())}),a(),n(3,"div",25)(4,"div",26),x(5,"ngx-charts-bar-vertical",27),a()()()()}if(r&2){let i=m();c(5),I("view",i.view)("results",i.currentCustomer)("legendTitle","\u0627\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0627\u062D\u0635\u0627\u0626\u064A\u0627\u062A")("legend",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxis",!0)("yAxis",!0)("gradient",!0)("showDataLabel",!0)("animations",!1)}}var ct=(()=>{let o=class o{constructor(e,t){this._CustomerTransactionsService=e,this._TransactionsService=t,this.SearchFeildNameAndId="",this.SearchFeildAmount="",this.currentCustomer=[],this.isLightBoxOpen=!1,this.view=[700,400]}ngOnInit(){this.getAllCustromersData(),this.getAllTransactionsData()}getAllCustromersData(){this._CustomerTransactionsService.getAllCustromersData().subscribe({next:e=>{this.AllCustomers=e},error:e=>{console.log(e)}})}getAllTransactionsData(){this._TransactionsService.getAllTransactionsData().subscribe({next:e=>{this.AllTransactions=e},error:e=>{console.log(e)}})}HandleCustomerData(e){let t=[...this.AllTransactions];this.currentCustomer=[],t.forEach(l=>{l.customer_id===e.id&&this.currentCustomer.push({name:l.date,value:l.amount})})}toggleLightBox(){this.isLightBoxOpen=!this.isLightBoxOpen}StopProp(e){e.stopPropagation()}};o.\u0275fac=function(t){return new(t||o)(A(X),A(Y))},o.\u0275cmp=F({type:o,selectors:[["app-all-customers"]],standalone:!0,features:[k],decls:2,vars:2,consts:[[1,"LightBoxContainer"],[1,"container","my-3"],[1,"text-center","h4"],["href","https://getbootstrap.com/","target","_blank",1,"text-secondary"],[1,"row","mb-3","justify-content-between"],[1,"col-lg-6","mb-3","mb-lg-0"],[1,"card","shadow","p-3"],[1,"h3","d-flex","justify-content-evenly","align-items-center"],[1,"text-uppercase"],[1,"pi","pi-users","fs-4"],[1,"pi","pi-credit-card","fs-4"],[1,"col-lg-6","mb-3","mb-lg-0","px-4"],["type","search","placeholder","Search By Name or ID",1,"form-control",3,"ngModelChange","ngModel"],["type","search","placeholder","Search By Amount",1,"form-control",3,"ngModelChange","ngModel"],[1,"table-responsive"],[1,"table","text-center","align-middle","table-striped"],[1,"table-dark"],[1,"text-nowrap","fw-bold"],[1,"btn","btn-outline-primary","text-uppercase",3,"click"],[1,"pi","pi-chart-bar","fs-4","mx-1"],[1,"table","shadow-lg","text-center"],[1,"text-nowrap"],[1,"LightBoxContainer",3,"click"],[1,"LightBoxContent","overflow-scroll","card","position-relative",3,"click"],[1,"btn-close","position-absolute","top-0","end-0","m-2",3,"click"],[1,"h-100","w-100","p-4"],[1,"text-center","chart-container","shadow-lg","p-4","rounded-3"],[3,"view","results","legendTitle","legend","showXAxisLabel","showYAxisLabel","xAxis","yAxis","gradient","showDataLabel","animations"]],template:function(t,l){t&1&&w(0,K,44,7,"section")(1,Q,6,11,"div",0),t&2&&(g(0,l.AllCustomers&&l.AllTransactions?0:-1),c(),g(1,l.isLightBoxOpen?1:-1))},dependencies:[V,D,W,P,N,O,$,U,H,j],styles:[".LightBoxContainer[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background-color:#00000080;z-index:99}.chart-container[_ngcontent-%COMP%]{width:100%;height:100%;max-width:800px;margin:auto}"]});let r=o;return r})();export{ct as AllCustomersComponent};
